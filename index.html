<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <title>Generatore di Numeri Casuali</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="A7GTu7v66SP0scbHDKSz_5dkVJHzYltRi1Nrv69Qnhs" />
    <meta name='description' content='Un generatore di numeri casuali a lista'>
    <meta property="og:title" content="Generatore di Numeri Casuali">
    <meta property="og:description" content="Un generatore di numeri casuali a lista">
    <meta property="og:url" content="https://exelvi.github.io/generatore/">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="it_IT">
    <meta property="og:site_name" content="Generatore di Numeri Casuali">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@exelvi1">
    <meta name="twitter:title" content="Generatore di Numeri Casuali">
    <meta name="twitter:description" content="Un generatore di numeri casuali a lista">
    <!-- Si, sia microsoft che google, perché no? -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DV3JLCYDTG"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-DV3JLCYDTG');
    </script>
    <!-- Clarity -->
    <script type="text/javascript">
        (function (c, l, a, r, i, t, y) {
            c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
            t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
            y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "kw5h4v8a6d");
    </script>

    <!--Ho usato bootstrap per lo style-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body>
    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="impostazioniDropdown"
            data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-gear"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="impostazioniDropdown">
            <li><button class="dropdown-item" onclick="cambiaTema()">Cambia tema</button></li>
            <li>
                <hr class="dropdown-divider">
            </li>
            <li><button class="dropdown-item" onclick="resetlocal()">Resetta localStorage</button></li>
        </ul>
    </div>
    <h1 class="text-center">Generatore di Numeri Casuali</h1>

    <div class="row justify-content-center">
        <div class="col-md-6">
            <label for="quantitaNumeri">Quantità di Numeri:</label>
            <input type="number" id="quantitaNumeri" class="form-control" min="1" value="5">
            <label for="minimo">Da:</label>
            <input type="number" id="minimo" class="form-control" placeholder="Da" value="1">
            <label for="maksim">A:</label>
            <input type="number" id="maksim" class="form-control" placeholder="A" value="28">
            <button class="btn btn-secondary mt-3" data-bs-toggle="modal" data-bs-target="#escludiNumeroModal"><i
                    class="bi bi-x-circle"></i> Escludi
                Numero</button>
            <button class="btn btn-secondary mt-3" data-bs-toggle="modal" data-bs-target="#saveModal"><i
                    class="bi bi-floppy"></i> Salva</button>
        </div>
    </div>

    <div class="row justify-content-center mt-3">
        <div class="col-md-6">
            <button class="btn btn-primary" onclick="generaNumerettibelli()"><i class="bi bi-arrow-clockwise"></i>
                Genera Numeri</button>
        </div>
    </div>

    <div class="row justify-content-center mt-3">
        <div class="col-md-6">
            <h3>Numeri Generati:</h3>
            <ul id="numerini" class="list-group"></ul>
        </div>
    </div>
    </div>

    <div class="modal fade" id="escludiNumeroModal" tabindex="-1" aria-labelledby="escludiNumeroModal"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="escludiNumeroModalLabel">Escludi Numero</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="number" id="numeronibrutti" class="form-control"
                        placeholder="Inserisci il numero da escludere">
                    </br>
                    <h3>Numeri Esclusi:</h3>
                    <div id="numeriBruttibruttiLista" class="d-flex flex-wrap gap-2"></div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Chiudi</button>
                    <button type="button" class="btn btn-primary" onclick="aggiunginumeronibrutti()">Aggiungi</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="saveModal" tabindex="-1" aria-labelledby="saveModal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="saveModalLabel">Salvataggi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="text" id="nomeSalvataggio" class="form-control"
                        placeholder="Inserisci nome salvataggio">
                    </br>
                    <button type="button" class="btn btn-primary" onclick="salvaSalvataggio()">Salva</button>
                    </br>
                    </br>
                    <h3>Salvataggi:</h3>
                    <ul id="salvataggiLista" class="list-group"></ul>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Chiudi</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <!-- Ciao, se stai guardando questo codice ti dico solo che non avevo idee per le variabili :) -->
    <!-- 
    Questo codice è stato creato da EXELVI per un piccolo progetto scolastico. 
    Sei libero di utilizzarlo e modificarlo per i tuoi progetti, 
    ma ti chiedo cortesemente di riconoscere il mio contributo includendo il mio nome o link a github nella documentazione o direttamente nel codice. Grazie
    Github: https://github.com/EXELVI
    -->

    <script>
        var numeriCattivi = [],
            salvataggi = {};

        function generaNumerettibelli() {
            var quantitaNumeri = document.getElementById('quantitaNumeri').value;
            var minimo = parseInt(document.getElementById('minimo').value);
            var maksim = parseInt(document.getElementById('maksim').value);
            var numerini = document.getElementById('numerini');

            if (!minimo || !maksim || !quantitaNumeri) return alert("Inserisci tutti i valori!")

            numerini.innerHTML = '';

            if (((maksim - minimo + 1) - numeriCattivi.length) < quantitaNumeri) {
                alert("L'intervallo tra il massimo e il minimo non è sufficiente per generare la quantità richiesta di numeri.");
                return;
            }

            var numeriGenerati = [];

            for (var i = 0; i < quantitaNumeri; i++) {
                var numeroCasuale;
                do {
                    numeroCasuale = Math.floor(Math.random() * (maksim - minimo + 1)) + minimo;
                } while (numeriGenerati.includes(numeroCasuale) || numeriCattivi.includes(numeroCasuale));

                numeriGenerati.push(numeroCasuale);

                var listItem = document.createElement('li');
                listItem.className = 'list-group-item';
                listItem.appendChild(document.createTextNode(numeroCasuale));
                numerini.appendChild(listItem);
            }
            localStorage.setItem('quantitaNumeri', quantitaNumeri);
            localStorage.setItem('minimo', minimo);
            localStorage.setItem('massimo', maksim);
            localStorage.setItem('numeriEsclusi', JSON.stringify(numeriCattivi));
        }

        function aggiunginumeronibrutti() {
            var numeronibrutti = parseInt(document.getElementById('numeronibrutti').value);

            if (!numeronibrutti) return alert("Immetti un numero prima!")

            if (!numeriCattivi.includes(numeronibrutti)) {
                numeriCattivi.push(numeronibrutti);

                var numeriBruttibruttiLista = document.getElementById('numeriBruttibruttiLista');
                var badge = document.createElement('span');
                badge.className = 'badge d-flex align-items-center p-1 pe-2 text-danger-emphasis bg-danger-subtle border border-danger-subtle rounded-pill';
                badge.innerHTML = numeronibrutti + '<span class="vr mx-2"></span><a href="#" onclick="rimuovinumeronibrutti(' + numeronibrutti + ')"><i class="bi bi-x-circle-fill text-danger"></i></a>';

                numeriBruttibruttiLista.appendChild(badge);
                document.getElementById('numeronibrutti').value = '';
            } else {
                alert("Questo numero è già stato escluso.");
            }
        }
        function visualizzaNumeriEsclusi() {
            var numeriBruttibruttiLista = document.getElementById('numeriBruttibruttiLista');
            numeriBruttibruttiLista.innerHTML = '';

            for (var i = 0; i < numeriCattivi.length; i++) {
                var badge = document.createElement('span');
                badge.className = 'badge d-flex align-items-center p-1 pe-2 text-danger-emphasis bg-danger-subtle border border-danger-subtle rounded-pill';
                badge.innerHTML = numeriCattivi[i] + '<span class="vr mx-2"></span><a href="#" onclick="rimuovinumeronibrutti(' + numeriCattivi[i] + ')"><i class="bi bi-x-circle-fill text-danger"></i></a>';
                numeriBruttibruttiLista.appendChild(badge);
            }
        }

        function visualizzaSalvataggi() {
            var salvataggiLista = document.getElementById('salvataggiLista');

            salvataggiLista.innerHTML = '';
            var keys = Object.keys(salvataggi)
            for (var i = 0; i < keys.length; i++) {

                var listItem = document.createElement('li');
                listItem.className = 'list-group-item';
                listItem.appendChild(document.createTextNode(keys[i]));
                listItem.innerHTML = '<a href="#" onclick="rimuoviSalvattaggio(\'' + keys[i] + '\')" class="bi bi-x-circle-fill text-end text-danger"></a> ' + listItem.innerHTML + ' <button type="button" class="btn btn-primary  float-end" onclick="caricaSalvataggio(\'' + keys[i] + '\')"><i class="bi bi-upload"></i> Carica</button>'
                salvataggiLista.appendChild(listItem);

            }

        }

        function salvaSalvataggio() {
            var nomeSalvataggio = document.getElementById('nomeSalvataggio').value;
            if (!nomeSalvataggio) return alert("Inserisci un nome!")
            salvataggi[nomeSalvataggio] = numeriCattivi
            localStorage.setItem("numeriEsclusiNew", JSON.stringify(salvataggi))
            window.location.reload()
        }

        function rimuoviSalvattaggio(save) {
            if (localStorage.getItem("selectedSave") == save) {
                localStorage.setItem("selectedSave", salvataggi.first())
            }
            delete salvataggi[save]
            localStorage.setItem("numeriEsclusiNew", JSON.stringify(salvataggi))
            window.location.reload()
        }

        function caricaSalvataggio(save) {
            localStorage.setItem("selectedSave", save)
            window.location.reload()
        }

        function rimuovinumeronibrutti(numero) {
            var indexxxxx = numeriCattivi.indexOf(numero);
            if (indexxxxx !== -1) {
                numeriCattivi.splice(indexxxxx, 1);
                document.getElementById('numeriBruttibruttiLista').removeChild(document.getElementById('numeriBruttibruttiLista').childNodes[indexxxxx]);
            }
        }

        function cambiaTema(tipoTema) {
            if (!tipoTema) {
                var temaaaStorage = localStorage.getItem('tema');
                if (temaaaStorage != "dark") {
                    document.body.setAttribute('data-bs-theme', "dark");
                    localStorage.setItem('tema', "dark");
                }
                else {
                    document.body.setAttribute('data-bs-theme', "light");
                    localStorage.setItem('tema', "light")
                }
            } else if (tipoTema === 'dark' || tipoTema === 'light') {
                document.body.setAttribute('data-bs-theme', tipoTema);
                localStorage.setItem('tema', tipoTema);
            }
        }

        function resetlocal() {
            var confermaaa = window.confirm("Sei sicuro di voler resettare la local? (Questo eliminerà tutti i tuoi valori salvati)");
            if (confermaaa) {
                localStorage.clear();
                alert('LocalStorage ripristinata con successo!');
                window.location.reload()
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
            var temaSalvato = localStorage.getItem('tema');
            if (temaSalvato) {
                cambiaTema(temaSalvato);
            }
            var quantitaSalvata = localStorage.getItem('quantitaNumeri');
            var minimoSalvato = localStorage.getItem('minimo');
            var massimoSalvato = localStorage.getItem('massimo');

            if (localStorage.getItem('numeriEsclusi')) { // Vecchia versione (unico array) a nuova versione (JSON con più salvataggi)
                localStorage.setItem('numeriEsclusiNew', JSON.stringify({ "Salvataggio 1": JSON.parse(localStorage.getItem('numeriEsclusi')) }));
                localStorage.removeItem("numeriEsclusi")
                localStorage.setItem('selectedSave', "Salvataggio 1");
            }
            var numeriEsclusiSalvati = JSON.parse(localStorage.getItem('numeriEsclusiNew'));
            var selectedSave = localStorage.getItem('selectedSave');
            if (quantitaSalvata) {
                document.getElementById('quantitaNumeri').value = quantitaSalvata;
            }
            if (minimoSalvato) {
                document.getElementById('minimo').value = minimoSalvato;
            }
            if (massimoSalvato) {
                document.getElementById('maksim').value = massimoSalvato;
            }
            if (numeriEsclusiSalvati && selectedSave) {
                salvataggi = numeriEsclusiSalvati
                visualizzaSalvataggi()
                numeriCattivi = numeriEsclusiSalvati[selectedSave];
                visualizzaNumeriEsclusi();

            }
        });

    </script>

</body>

</html>