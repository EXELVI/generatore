<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <title>Generatore di Numeri Casuali</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="A7GTu7v66SP0scbHDKSz_5dkVJHzYltRi1Nrv69Qnhs" />
    <meta name='description' content='Un generatore di numeri casuali a lista'>
    <meta property="og:title" content="Generatore di Numeri Casuali">
    <meta property="og:description" content="Un generatore di numeri casuali a lista">
    <meta property="og:url" content="https://exelvi.github.io/generatore/">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="it_IT">
    <meta property="og:site_name" content="Generatore di Numeri Casuali">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@exelvi1">
    <meta name="twitter:title" content="Generatore di Numeri Casuali">
    <meta name="twitter:description" content="Un generatore di numeri casuali a lista">
    <!-- Si, sia microsoft che google, perché no? -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DV3JLCYDTG"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-DV3JLCYDTG');
    </script>
    <!-- Clarity -->
    <script type="text/javascript">
        (function (c, l, a, r, i, t, y) {
            c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
            t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
            y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "kw5h4v8a6d");
    </script>
    <style>
        .app {
            font-family: 'Courier New', Courier, monospace;
            position: absolute;
            width: 80%;
            height: 80%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #2d2d2d;
            width: 100%;
            height: 30px;
            padding: 0 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
            cursor: grab;
        }

        .top-bar:active {
            cursor: grabbing;
        }

        .buttons {
            display: flex;
            align-items: center;
        }

        .buttons span {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            cursor: pointer;
        }

        .close {
            background-color: #ff5f56;
        }

        .minimize {
            background-color: #ffbd2e;
        }

        .zoom {
            background-color: #27c93f;
        }

        .actionbuttons {
            margin-left: auto;
            margin-top: 6px;
            display: flex;
            align-items: center;
            justify-content: space-between;

        }

        .action-button {
            cursor: pointer;
            padding-right: 6px;
        }


        .title {
            color: #bbb;
            font-size: 14px;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        .iframe-container {
            width: 100%;
            height: calc(100% - 30px);
        }

        iframe {
            width: 100%;
            height: 100%;
        }
    </style>


    <!--Ho usato bootstrap per lo style-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body>
    <div class="app" id="wiki-window" style="display: none;">
        <div class="top-bar" id="top-bar" draggable="true">
            <div class="buttons">
                <span id="close" class="close"></span>
                <span id="minimize" class="minimize"></span>
                <span id="zoom" class="zoom"></span>
            </div>
            <div class="actionbuttons">
                <div id="reload" class="action-button">
                    <i class="bi bi-arrow-clockwise"></i>
                </div>

                <div id="openInNewTab" class="action-button">
                    <i class="bi bi-box-arrow-up-right"></i>
                </div>
            </div>
            <div class="title" id="bar-title">Guida</div>
        </div>

        <div class="iframe-container" id="iframe-body">
            <iframe id="wiki-frame" src="/wiki.html" frameborder="0"></iframe>
        </div>
    </div>


    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="impostazioniDropdown"
            data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-gear"></i>&#8203;
        </button>
        <ul class="dropdown-menu mx-0 border-0 shadow w-220px" aria-labelledby="impostazioniDropdown">

            <li>
                <a class="dropdown-item" onclick="document.getElementById('cifreDecimali').focus()">
                    <div class="input-group">
                        <input type="number" id="cifreDecimali" class="form-control" placeholder="Cifre decimali"
                            value="0" max="100" min="0">
                        <span class="input-group-text" onclick="document.getElementById('cifreDecimali').focus()"><i
                                class="bi bi-123"></i></span>
                    </div>
                </a>
            </li>
            <li>
                <hr class="dropdown-divider">
            </li>
            <li>
                <button class="dropdown-item d-flex gap-2 align-items-center" onclick="cambiaTema()"><i id="itemTema"
                        class="bi bi-sun-fill"></i> Cambia tema</button>
            </li>
            <li>
                <button class="dropdown-item d-flex gap-2 align-items-center" onclick="helpWindow()"><i id="helpWindow"
                        class="bi bi-question-circle-fill"></i> Guida</button>
            </li>
            <li>
                <a class="dropdown-item d-flex gap-2 align-items-center" href="https://github.com/EXELVI/generatore"
                    target="_blank" rel="noopener noreferrer"><i class="bi bi-github"></i> Github<i
                        style="transform: scale(0.7);" class="bi bi-box-arrow-up-right"></i></a>
            </li>
            <li>
                <hr class="dropdown-divider">
            </li>
            <li>
                <button class="dropdown-item d-flex gap-2 align-items-center text-danger" onclick="resetlocal()"><i
                        class="bi bi-eraser-fill"></i> Elimina impostazioni</button>
            </li>
        </ul>
    </div>

    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="errorToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true"
            data-bs-autohide="false">
            <div class="toast-header">
                <i class="bi bi-exclamation-diamond-fill me-2 text-danger"></i>
                <strong class="me-auto text-danger">Errore nel codice!</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                Si è verificato un errore nel codice!
                </br>
                Per favore apri un <a href="https://github.com/EXELVI/generatore/issues/new" target="_blank"
                    rel="noopener noreferrer">issue su Github</a> riportando i dati qua sotto:

                <div class="container-fluid">
                    <div class="row">
                        <div class="col">
                            <div class="codebox border p-3 mb-3">
                                <pre><code id="code-content">
                              </code></pre>
                                <button class="btn btn-primary copy-button" onclick="copyCode()"><i
                                        id="bottoneErrorCopia" class="bi bi-clipboard"></i> Copia</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>


    <div class="container-fluid">

        <h1 class="text-center">Generatore di Numeri Casuali</h1>

        <div class="row justify-content-center">
            <div class="col-md-6">
                <p class="text-danger" id="valueError" hidden><i class="bi bi-exclamation-circle-fill"></i> Inserisci
                    tutti
                    i valori</p>
                <div id="quantitaNumeriDiv">
                    <label for="quantitaNumeri">Quantità di Numeri:</label>
                    <div class="input-group">
                        <input type="number" id="quantitaNumeri" class="form-control" min="1" value="5">
                        <span class="input-group-text" onclick="document.getElementById('quantitaNumeri').focus()"><i
                                class="bi bi-list-ol"></i></span>
                    </div>
                </div>
                <div id="minimoDiv">
                    <label for="minimo">Da:</label>
                    <div class="input-group">
                        <input type="number" id="minimo" class="form-control" placeholder="Da" value="1">
                        <span class="input-group-text" onclick="document.getElementById('minimo').focus()"><i
                                class="bi bi-arrow-bar-right"></i></span>
                    </div>
                </div>
                <div id="maksimDiv">
                    <label for="maksim">A:</label>
                    <div class="input-group">
                        <input type="number" id="maksim" class="form-control" placeholder="A" value="28">
                        <span class="input-group-text" onclick="document.getElementById('maksim').focus()"><i
                                class="bi bi-arrow-bar-left"></i></span>
                    </div>

                </div>
                <button class="btn btn-secondary mt-3" data-bs-toggle="modal" data-bs-target="#escludiNumeroModal"><i
                        class="bi bi-x-circle"></i> Escludi
                    Numero</button>
                <button class="btn btn-secondary mt-3" data-bs-toggle="modal" data-bs-target="#saveModal"><i
                        class="bi bi-floppy"></i> Salvataggi</button>
            </div>
        </div>

        <div class="row justify-content-center mt-3">
            <div class="col-md-6">
                <button class="btn btn-primary" onclick="generaNumerettibelli()"><i class="bi bi-arrow-clockwise"></i>
                    Genera Numeri</button>
            </div>
        </div>

        <div class="row justify-content-center mt-3">
            <div class="col-md-6">
                <h3>Numeri Generati</h3>
                <ul id="numerini" class="list-group"></ul>
            </div>
        </div>

    </div>

    <div class="modal fade" id="escludiNumeroModal" tabindex="-1" aria-labelledby="escludiNumeroModal"
        aria-hidden="true" aria-modal="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="escludiNumeroModalLabel">Escludi Numero</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="text-danger" id="escludiError" hidden><i class="bi bi-exclamation-circle-fill"></i>
                        Inserisci un numero</p>
                    <input type="number" id="numeronibrutti" class="form-control"
                        onkeydown="if(event.key == 'Enter') { event.preventDefault(); aggiunginumeronibrutti(); }"
                        placeholder="Inserisci il numero da escludere">
                    <button type="button" class="btn btn-primary mt-2"
                        onclick="aggiunginumeronibrutti()">Aggiungi</button>
                    </br>

                    <h3 class="mt-2">Numeri Esclusi <div class="float-end"><button type="button"
                                class="btn btn-danger btn-sm" onclick="deleteAll(salvataggioCorrente)"><i
                                    id="eliminaTuttoIcona" class="bi bi-x-lg"></i> Elimina tutto</button></div>
                    </h3>
                    <div id="numeriBruttibruttiLista" class="d-flex flex-wrap gap-2"></div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary"
                        onclick="salvaSalvataggio(salvataggioCorrente, true)"><i id="salvaicona"
                            class="bi bi-download"></i> Registra nel salvataggio <strong
                            id="salvataggiotestotototo"></strong></button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Chiudi</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="saveModal" tabindex="-1" aria-labelledby="saveModal" aria-hidden="true"
        aria-modal="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="saveModalLabel">Salvataggi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="text-danger" id="salvaError" hidden><i class="bi bi-exclamation-circle-fill"></i>
                        Inserisci un nome</p>
                    <input type="text" id="nomeSalvataggio" class="form-control"
                        placeholder="Inserisci nome salvataggio"
                        onkeydown="if(event.key == 'Enter') { event.preventDefault(); salvaSalvataggio(); }">

                    <button type="button" class="btn btn-primary mt-2" onclick="salvaSalvataggio()">Salva</button>


                    <h3 class="mt-2">Salvataggi</h3>
                    <ul id="salvataggiLista" class="list-group"></ul>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Chiudi</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="modalConfirm" tabindex="-1" aria-labelledby="modalConfirm" aria-hidden="true"
        aria-modal="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalConfirmTitle">Sei sicuro?</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p id="modalConfirmMessage">Message</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="modalNoBtn" data-bs-dismiss="modal">No</button>
                    <button type="button" class="btn btn-danger" id="modalYesBtn">Si</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <!-- Ciao, se stai guardando questo codice ti dico solo che non avevo idee per le variabili :) -->
    <!-- 
    Questo codice è stato creato da EXELVI per un piccolo progetto scolastico. 
    Sei libero di utilizzarlo e modificarlo per i tuoi progetti, 
    ma ti chiedo cortesemente di riconoscere il mio contributo includendo il mio nome o link a github nella documentazione o direttamente nel codice. Grazie
    Github: https://github.com/EXELVI
    -->

    <script>
        //Come faccio a fare tipo la funzione confirm ma con un modal di bootstrap
        function checkVuota(n) {
            return (n === undefined || n === null || n === "" || isNaN(n))
        }

        function formatNumber(num) {
            if (num % 1 === 0) {
                return parseInt(num).toFixed(0);
            } else {
                return num;
            }
        }

        var numeriCattivi = [],
            salvataggi = {},
            salvataggioCorrente = "",
            salvataggiSettings = {};


        async function generaNumerettibelli() {
            var quantitaNumeri = document.getElementById('quantitaNumeri').value;
            var minimo = parseInt(document.getElementById('minimo').value);
            var maksim = parseInt(document.getElementById('maksim').value);
            var cifreDecimali = parseInt(document.getElementById('cifreDecimali').value);
            var numerini = document.getElementById('numerini');


            if (checkVuota(cifreDecimali)) {
                cifreDecimali = 0
            }

            var quantitaNumeriDiv = document.getElementById('quantitaNumeriDiv')
            var minimoDiv = document.getElementById('minimoDiv')
            var maksimDiv = document.getElementById('maksimDiv')
            if (checkVuota(document.getElementById('minimo').value) || checkVuota(document.getElementById('maksim').value) || checkVuota(quantitaNumeri)) {
                if (checkVuota(document.getElementById('minimo').value)) {
                    minimoDiv.className = "text-danger"
                }
                if (checkVuota(document.getElementById('maksim').value)) {
                    maksimDiv.className = "text-danger"
                }
                if (checkVuota(quantitaNumeri)) {
                    quantitaNumeriDiv.className = "text-danger"
                }
                document.getElementById("valueError").innerHTML = "<i class=\"bi bi-exclamation-circle-fill\"></i> Inserisci tutti i valori</p>"
                return document.getElementById("valueError").hidden = false
            } else {
                if (!checkVuota(document.getElementById('minimo').value)) minimoDiv.className = ""
                if (!checkVuota(document.getElementById('maksim').value)) maksimDiv.className = ""
                if (!checkVuota(quantitaNumeri)) quantitaNumeriDiv.className = ""
                document.getElementById("valueError").hidden = true
            }

            if (quantitaNumeri > 1000) {
                const modallll = await modalConfirm("Sei sicuro di generare una quantità di numeri così grande? (Potrebbe metterci un po' di tempo e la pagina risulterà bloccata)")
                if (!modallll) {
                    return
                }
            }

            numerini.innerHTML = '';

            var numPossibili = (maksim - minimo) * Math.pow(10, cifreDecimali) + 1;
            if ((numPossibili - numeriCattivi.length) < quantitaNumeri) {
                document.getElementById("valueError").innerHTML = "<i class=\"bi bi-exclamation-circle-fill\"></i> L'intervallo tra il massimo e il minimo non è sufficiente per generare la quantità richiesta di numeri.</p>";
                return document.getElementById("valueError").hidden = false;
            } else {
                document.getElementById("valueError").hidden = true;
            }

            var numeriGenerati = [];

            for (var i = 0; i < quantitaNumeri; i++) {
                var numeroCasuale;
                do {
                    if (cifreDecimali > 0) {

                        numeroCasuale = formatNumber(((Math.random() * (maksim - minimo)) + (minimo)).toFixed(cifreDecimali)).toString()

                    } else {
                        numeroCasuale = Math.floor(Math.random() * (maksim - minimo + 1)) + minimo;
                    }
                } while (numeriGenerati.includes(numeroCasuale) || numeriCattivi.includes(numeroCasuale));

                numeriGenerati.push(numeroCasuale);

                numeroCasuale = Number(numeroCasuale).toString()


                var listItem = document.createElement('li');
                listItem.className = 'list-group-item';
                listItem.appendChild(document.createTextNode(numeroCasuale));
                listItem.innerHTML += '<a style="cursor: pointer;" title="Aggiungi/Rimuovi ai numeri esclusi" onclick="toggleNumero(' + numeroCasuale + ')" id="botonNumero' + String(numeroCasuale).replace(/\./g, "v").replace(/-/g, "m") + '" class="bi bi-x-circle-fill float-end text-end text-danger"></a>'
                numerini.appendChild(listItem);
            }
            if (salvataggioCorrente) {
                salvataggiSettings[salvataggioCorrente] = { quantitaNumeri: quantitaNumeri, minimo: minimo, massimo: maksim, cifreDecimali: cifreDecimali }
                localStorage.setItem('settingsNew', JSON.stringify(salvataggiSettings));
            }

        }

        function toggleNumero(num) {
            if (numeriCattivi.includes(num)) rimuovinumeronibrutti(num, true)
            else aggiunginumeronibrutti(num)
        }

        function aggiunginumeronibrutti(num) {
            var numeronibrutti = parseInt(document.getElementById('numeronibrutti').value)
            if (num) numeronibrutti = num;
            if (!num && checkVuota(parseInt(document.getElementById('numeronibrutti').value))) {
                document.getElementById("escludiError").innerHTML = "<i class=\"bi bi-exclamation-circle-fill\"></i> Inserisci un numero</p>"
                return document.getElementById("escludiError").hidden = false
            } else {
                document.getElementById("escludiError").hidden = true
            }

            if (!numeriCattivi.includes(numeronibrutti)) {
                document.getElementById("escludiError").hidden = true
                numeriCattivi.push(numeronibrutti);

                var numeriBruttibruttiLista = document.getElementById('numeriBruttibruttiLista');
                var badge = document.createElement('span');
                badge.className = 'badge d-flex align-items-center p-1 pe-2 text-danger-emphasis bg-danger-subtle border border-danger-subtle rounded-pill';
                badge.innerHTML = numeronibrutti + '<span class="vr mx-2"></span><a style="cursor: pointer;" onclick="rimuovinumeronibrutti(' + numeronibrutti + ')"><i class="bi bi-x-circle-fill text-danger"></i></a>';

                numeriBruttibruttiLista.appendChild(badge);
                document.getElementById('numeronibrutti').value = '';

                console.log(String(num).replace(/\./g, "v").replace(/-/g, "m"), num)
                if (num) document.getElementById("botonNumero" + String(num).replace(/\./g, "v").replace(/-/g, "m")).className = "bi bi-check2 float-end text-end text-danger"

            } else {
                document.getElementById("escludiError").innerHTML = "<i class=\"bi bi-exclamation-circle-fill\"></i> Questo numero è già stato escluso</p>"
                return document.getElementById("escludiError").hidden = false
            }
        }
        function visualizzaNumeriEsclusi() {
            var numeriBruttibruttiLista = document.getElementById('numeriBruttibruttiLista');
            numeriBruttibruttiLista.innerHTML = '';

            for (var i = 0; i < numeriCattivi.length; i++) {
                var badge = document.createElement('span');
                badge.className = 'badge d-flex align-items-center p-1 pe-2 text-danger-emphasis bg-danger-subtle border border-danger-subtle rounded-pill';
                badge.innerHTML = numeriCattivi[i] + '<span class="vr mx-2"></span><a style="cursor: pointer;" onclick="rimuovinumeronibrutti(' + numeriCattivi[i] + ')"><i class="bi bi-x-circle-fill text-danger"></i></a>';
                numeriBruttibruttiLista.appendChild(badge);
            }
        }

        function visualizzaSalvataggi() {
            var salvataggiLista = document.getElementById('salvataggiLista');

            salvataggiLista.innerHTML = '';
            var keys = Object.keys(salvataggi)
            for (var i = 0; i < keys.length; i++) {
                var questo = salvataggioCorrente == keys[i]
                var listItem = document.createElement('li');
                listItem.className = 'list-group-item';
                listItem.appendChild(document.createTextNode(keys[i]));
                listItem.innerHTML = '<a style="cursor: pointer;" onclick="rimuoviSalvattaggio(\'' + keys[i] + '\')" class="bi bi-x-circle-fill text-end text-danger"></a> ' + listItem.innerHTML + (questo ? " <span class=\"badge text-bg-primary\">In uso</span>" : "") + '<div class="float-end"><button type="button" class="btn btn-primary" onclick="caricaSalvataggio(\'' + keys[i] + '\')"><i id="caricaicona' + keys[i] + '" class="bi bi-upload"></i> Carica</button> <button type="button" class="btn btn-primary" onclick="salvaSalvataggio(\'' + keys[i] + '\')"><i id="salvaicona' + keys[i] + '" class="bi bi-download"></i> Salva</button></div>'
                salvataggiLista.appendChild(listItem);

            }

        }

        async function deleteAll(salvataggio) {
            const eliminaConfirm = await modalConfirm("Vuoi veramente eliminare i numeri registrati nel salvataggio?")
            if (eliminaConfirm == true) {
                for (var indexxxxx = numeriCattivi.length - 1; indexxxxx >= 0; indexxxxx--) {
                    numeriCattivi.splice(indexxxxx, 1);
                    document.getElementById('numeriBruttibruttiLista').removeChild(document.getElementById('numeriBruttibruttiLista').childNodes[indexxxxx]);
                }

                document.getElementById("eliminaTuttoIcona").className = "bi bi-check2"

                setTimeout(function () {
                    document.getElementById("eliminaTuttoIcona").className = "bi bi-x-lg"
                }, 1000)
            } else {
                return
            }
        }

        async function salvaSalvataggio(salvataggio, apriModal) {
            var nomeSalvataggio = salvataggio || document.getElementById('nomeSalvataggio').value;
            var nomeeeee = document.getElementById('nomeSalvataggio')
            if (!salvataggio && apriModal) {
                $("#saveModal").modal("show")
                return document.getElementById('nomeSalvataggio').focus()

            }
            else if (!nomeSalvataggio) {
                document.getElementById("salvaError").innerHTML = "<i class=\"bi bi-exclamation-circle-fill\"></i> Inserisci un nome</p>"
                return document.getElementById("salvaError").hidden = false
            } else {
                document.getElementById("salvaError").hidden = true
            }

            //Se ci sono numeri esclusi, il salvataggio NON esiste: chiede se vuole creare un salvataggio vuoto o con i numeri esclusi
            if (!Object.keys(salvataggi).includes(nomeSalvataggio) && numeriCattivi.length > 0) {
                const modallll = await modalConfirm("Hai dei numeri esclusi, vuoi crearne un salvataggio vuoto? [Si] (o vuoi crearne uno con i numeri già esclusi [No]?)")
                if (modallll) {
                    numeriCattivi = []
                    visualizzaNumeriEsclusi()
                }

            }

            salvataggi[nomeSalvataggio] = numeriCattivi
            localStorage.setItem("numeriEsclusiNew", JSON.stringify(salvataggi))
            localStorage.setItem("selectedSave", nomeSalvataggio)
            nomeeeee.value = ""
            setSettings()
            document.getElementById("salvaicona").className = "bi bi-check2"
            if (salvataggio) document.getElementById("salvaicona" + salvataggio).className = "bi bi-check2"
            setTimeout(function () {
                document.getElementById("salvaicona").className = "bi bi-download"
                if (salvataggio) document.getElementById("salvaicona" + salvataggio).className = "bi bi-upload"
            }, 1000)

        }

        function rimuoviSalvattaggio(save) {
            delete salvataggi[save]
            delete salvataggiSettings[save]
            if (localStorage.getItem("selectedSave") == save) {
                localStorage.setItem("selectedSave", Object.keys(salvataggi)[0])
            }
            localStorage.setItem("numeriEsclusiNew", JSON.stringify(salvataggi))
            localStorage.setItem("settingsNew", JSON.stringify(salvataggiSettings))
            if (Object.keys(JSON.parse(localStorage.getItem("numeriEsclusiNew"))).length == 0) {
                localStorage.setItem("selectedSave", "")
            }
            setSettings()
        }

        function caricaSalvataggio(save) {
            localStorage.setItem("selectedSave", save)
            setSettings()
            document.getElementById("caricaicona" + save).className = "bi bi-check2"
            setTimeout(function () {
                document.getElementById("caricaicona" + save).className = "bi bi-upload"
            }, 1000)
        }

        function rimuovinumeronibrutti(numero, toggle) {
            var indexxxxx = numeriCattivi.indexOf(numero);
            if (indexxxxx !== -1) {
                numeriCattivi.splice(indexxxxx, 1);
                document.getElementById('numeriBruttibruttiLista').removeChild(document.getElementById('numeriBruttibruttiLista').childNodes[indexxxxx]);
                if (toggle) document.getElementById("botonNumero" + String(numero).replace(/\./g, "v").replace(/-/g, "m")).className = "bi bi-x-circle-fill float-end text-end text-danger"
            } else {
                var localStorageData = {};
                if (localStorage.length > 0) {
                    for (var i = 0; i < localStorage.length; i++) {
                        var key = localStorage.key(i);
                        var value = localStorage.getItem(key);
                        localStorageData[key] = value;
                    }
                }
                document.getElementById("code-content").innerText = JSON.stringify(localStorageData, null, 3)
                const errorToast = document.getElementById('errorToast')
                const toastBootstrap = bootstrap.Toast.getOrCreateInstance(errorToast)
                toastBootstrap.show()
            }
        }

        function modalConfirm(message) {
            return new Promise((resolve, reject) => {
                const modal = new bootstrap.Modal(document.getElementById('modalConfirm'));
                document.getElementById('modalConfirmMessage').innerText = message;

                document.getElementById('modalConfirm').addEventListener('hide.bs.modal', event => {
                    resolve(false);
                })

                const yesBtn = document.getElementById('modalYesBtn');
                const noBtn = document.getElementById('modalNoBtn');

                yesBtn.onclick = () => {
                    resolve(true);
                    modal.hide();
                };

                noBtn.onclick = () => {
                    resolve(false);
                    modal.hide();
                };

                modal.show();
            });
        }


        function cambiaTema(tipoTema) {
            var itemTema = document.getElementById("itemTema")
            if (!tipoTema) {
                var temaaaStorage = localStorage.getItem('tema');
                if (temaaaStorage != "dark") {
                    document.body.setAttribute('data-bs-theme', "dark");
                    itemTema.className = "bi bi-sun-fill"
                    localStorage.setItem('tema', "dark");
                }
                else {
                    document.body.setAttribute('data-bs-theme', "light");
                    itemTema.className = "bi bi-moon-stars-fill"
                    localStorage.setItem('tema', "light")
                }
            } else if (tipoTema === 'dark' || tipoTema === 'light') {
                document.body.setAttribute('data-bs-theme', tipoTema);
                localStorage.setItem('tema', tipoTema);
            }
        }

        function resetlocal() {
            var confermaaa = window.confirm("Sei sicuro di voler eliminare tutte le impostazioni? (Questo eliminerà tutte le impostazioni salvate, compresi i salvataggi)");
            if (confermaaa) {
                localStorage.clear();
                alert('LocalStorage ripristinata con successo!');
                window.location.reload()
            }
        }

        function setSettings() {
            var temaSalvato = localStorage.getItem('tema');
            if (temaSalvato) {
                cambiaTema(temaSalvato);
            }
            var settingsNew = JSON.parse(localStorage.getItem('settingsNew'));

            if (localStorage.getItem('numeriEsclusi')) { // Vecchia versione (unico array) a nuova versione (JSON con più salvataggi)
                localStorage.setItem('numeriEsclusiNew', JSON.stringify({ "Salvataggio 1": JSON.parse(localStorage.getItem('numeriEsclusi')) }));
                localStorage.removeItem("numeriEsclusi")
                localStorage.setItem('selectedSave', "Salvataggio 1");
            }
            var numeriEsclusiSalvati = JSON.parse(localStorage.getItem('numeriEsclusiNew'));
            var selectedSave = localStorage.getItem('selectedSave');
            if (settingsNew) {
                salvataggiSettings = settingsNew
                if (settingsNew[selectedSave]) {
                    document.getElementById('cifreDecimali').value = settingsNew[selectedSave]?.cifreDecimali
                    document.getElementById('quantitaNumeri').value = settingsNew[selectedSave]?.quantitaNumeri
                    document.getElementById('minimo').value = settingsNew[selectedSave]?.minimo
                    document.getElementById('maksim').value = settingsNew[selectedSave]?.massimo
                }
            }
            var salvataggiotestotototo = document.getElementById('salvataggiotestotototo');
            salvataggiotestotototo.innerHTML = selectedSave
            if (numeriEsclusiSalvati) {
                salvataggi = numeriEsclusiSalvati
                if (selectedSave) {
                    salvataggioCorrente = selectedSave
                    numeriCattivi = numeriEsclusiSalvati[selectedSave];
                    visualizzaNumeriEsclusi();
                } else {
                    salvataggioCorrente = ""
                }
                visualizzaSalvataggi()
            }
        }

        function helpWindow() {
            var wikiWindow = document.getElementById('wiki-window');
            if (wikiWindow.style.display === 'none') {
                wikiWindow.style.display = 'block';
            } else {
                wikiWindow.style.display = 'none';
            }
        }
        
        document.addEventListener('DOMContentLoaded', function () {
            setSettings()

         
            

            let isDragging = false;
            let offsetX, offsetY;
            const wikiWindow = document.getElementById('wiki-window');
            const topBar = document.getElementById('top-bar');
            const iframeBody = document.getElementById('iframe-body');
            const minimizeButton = document.getElementById('minimize');
            const closeButton = document.getElementById('close');
            const zoomButton = document.getElementById('zoom');

            topBar.addEventListener('dragstart', (e) => {
                if (wikiWindow.style.width !== '100%') {
                    isDragging = true;
                    offsetX = e.clientX - wikiWindow.offsetLeft;
                    offsetY = e.clientY - wikiWindow.offsetTop;
                }
            });

            document.addEventListener('dragover', (e) => {
                if (isDragging) {
                    e.preventDefault();
                    const x = e.clientX - offsetX;
                    const y = e.clientY - offsetY;
                    wikiWindow.style.left = `${x}px`;
                    wikiWindow.style.top = `${y}px`;
                }
            });

            document.addEventListener('mouseup', () => {
                isDragging = false;
                topBar.style.cursor = 'grab';
            });

            minimizeButton.addEventListener('click', function () {
                if (iframeBody.style.display !== 'none') {
                    iframeBody.style.display = 'none';
                    topBar.style.borderBottomRightRadius = "5px";
                    topBar.style.borderBottomLeftRadius = "5px";
                    topBar.style.borderTopRightRadius = "5px";
                    topBar.style.borderTopLeftRadius = "5px";
                    topBar.style.width = "200px";
                } else {
                    iframeBody.style.display = 'block';
                    topBar.style.borderBottomRightRadius = "0";
                    topBar.style.borderBottomLeftRadius = "0";
                    if (wikiWindow.style.width == '100%') {
                        topBar.style.width = "100%";
                    } else {
                        topBar.style.width = "100%";
                    }
                }
            });


            closeButton.addEventListener('click', function () {
                wikiWindow.style.display = 'none';
            });

            zoomButton.addEventListener('click', function () {
                if (iframeBody.style.display === 'none') {
                    iframeBody.style.display = 'block';
                    topBar.style.borderRadius = '0';
                }
                if (wikiWindow.style.width === '100%') {
                    wikiWindow.style.width = '80%';
                    wikiWindow.style.height = '80%';
                    wikiWindow.style.left = '10%';
                    wikiWindow.style.top = '10%';
                    topBar.style.borderRadius = '5px';
                    topBar.style.width = '100%';
                    wikiWindow.style.maxWidth = '800px';
                    topBar.style.cursor = 'grab';
                } else {
                    wikiWindow.style.width = '100%';
                    wikiWindow.style.height = '100%';
                    wikiWindow.style.left = '0';
                    wikiWindow.style.top = '0';
                    topBar.style.width = '100%';
                    topBar.style.borderRadius = '0';
                    wikiWindow.style.maxWidth = 'none';
                    wikiWindow.style.left = '0px';
                    wikiWindow.style.top = '0px';
                    topBar.style.cursor = 'default';
                }
                //iframe actions buttons
                document.getElementById('reload').addEventListener('click', () => document.getElementById('wiki-frame').contentWindow.location.reload());
                document.getElementById('openInNewTab').addEventListener('click', () => window.open(document.getElementById('wiki-frame').src, '_blank'));

            });

        });



        function copyCode() {
            const codeContent = document.getElementById('code-content');
            const selection = window.getSelection();
            const range = document.createRange();
            range.selectNodeContents(codeContent);
            selection.removeAllRanges();
            selection.addRange(range);
            document.execCommand('copy');
            selection.removeAllRanges();
            document.getElementById("bottoneErrorCopia").className = "bi bi-clipboard-check-fill"
            setTimeout(function () {
                document.getElementById("bottoneErrorCopia").className = "bi bi-clipboard"
            }, 1000)
        }




    </script>

</body>

</html>