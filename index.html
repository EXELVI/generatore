<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <title>Generatore di Numeri Casuali</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="A7GTu7v66SP0scbHDKSz_5dkVJHzYltRi1Nrv69Qnhs" />
    <meta name='description' content='Un generatore di numeri casuali a lista'>
    <meta property="og:title" content="Generatore di Numeri Casuali">
    <meta property="og:description" content="Un generatore di numeri casuali a lista">
    <meta property="og:url" content="https://exelvi.github.io/generatore/">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="it_IT">
    <meta property="og:site_name" content="Generatore di Numeri Casuali">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@exelvi1">
    <meta name="twitter:title" content="Generatore di Numeri Casuali">
    <meta name="twitter:description" content="Un generatore di numeri casuali a lista">
    <!-- Si, sia microsoft che google, perché no? -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DV3JLCYDTG"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-DV3JLCYDTG');
    </script>
    <!-- Clarity -->
    <script type="text/javascript">
        (function (c, l, a, r, i, t, y) {
            c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
            t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
            y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "kw5h4v8a6d");
    </script>

    <!--Ho usato bootstrap per lo style-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body>


    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="impostazioniDropdown"
            data-bs-toggle="dropdown" aria-expanded="false">
            <i class="bi bi-gear"></i>
        </button>
        <ul class="dropdown-menu mx-0 border-0 shadow w-220px" aria-labelledby="impostazioniDropdown">
            <li>
                <button class="dropdown-item d-flex gap-2 align-items-center" onclick="cambiaTema()"><i id="itemTema"
                        class="bi bi-sun-fill"></i> Cambia tema</button>
            </li>
            <li>
                <hr class="dropdown-divider">
            </li>
            <li>
                <button class="dropdown-item d-flex gap-2 align-items-center text-danger" onclick="resetlocal()"><i
                        class="bi bi-eraser-fill"></i> Elimina impostazioni</button>
            </li>
        </ul>

    </div>
    <div class="container-fluid">

    <h1 class="text-center">Generatore di Numeri Casuali</h1>

    <div class="row justify-content-center">
        <div class="col-md-6">
            <p class="text-danger" id="valueError" hidden><i class="bi bi-exclamation-circle-fill"></i> Inserisci tutti
                i valori</p>
            <div id="quantitaNumeriDiv">
                <label for="quantitaNumeri">Quantità di Numeri:</label>
                <input type="number" id="quantitaNumeri" class="form-control" min="1" value="5">
            </div>
            <div id="minimoDiv">
                <label for="minimo">Da:</label>
                <input type="number" id="minimo" class="form-control" placeholder="Da" value="1">
            </div>
            <div id="maksimDiv">
                <label for="maksim">A:</label>
                <input type="number" id="maksim" class="form-control" placeholder="A" value="28">
            </div>
            <button class="btn btn-secondary mt-3" data-bs-toggle="modal" data-bs-target="#escludiNumeroModal"><i
                    class="bi bi-x-circle"></i> Escludi
                Numero</button>
            <button class="btn btn-secondary mt-3" data-bs-toggle="modal" data-bs-target="#saveModal"><i
                    class="bi bi-floppy"></i> Salvataggi</button>
        </div>
    </div>

    <div class="row justify-content-center mt-3">
        <div class="col-md-6">
            <button class="btn btn-primary" onclick="generaNumerettibelli()"><i class="bi bi-arrow-clockwise"></i>
                Genera Numeri</button>
        </div>
    </div>

    <div class="row justify-content-center mt-3">
        <div class="col-md-6">
            <h3>Numeri Generati:</h3>
            <ul id="numerini" class="list-group"></ul>
        </div>
    </div>
    </div>
    </div>

    <div class="modal fade" id="escludiNumeroModal" tabindex="-1" aria-labelledby="escludiNumeroModal"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="escludiNumeroModalLabel">Escludi Numero</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="text-danger" id="escludiError" hidden><i class="bi bi-exclamation-circle-fill"></i>
                        Inserisci un numero</p>
                    <input type="number" id="numeronibrutti" class="form-control"
                        onkeydown="if(event.key == 'Enter') { event.preventDefault(); aggiunginumeronibrutti(); }"
                        placeholder="Inserisci il numero da escludere">
                    <button type="button" class="btn btn-primary mt-2"
                        onclick="aggiunginumeronibrutti()">Aggiungi</button>
                    </br>

                    <h3 class="mt-2">Numeri Esclusi:</h3>
                    <div id="numeriBruttibruttiLista" class="d-flex flex-wrap gap-2"></div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary"
                        onclick="salvaSalvataggio(salvataggioCorrente, true)"><i id="salvaicona"
                            class="bi bi-download"></i> Salva nel
                        salvataggio <strong id="salvataggiotestotototo"></strong></button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Chiudi</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="saveModal" tabindex="-1" aria-labelledby="saveModal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="saveModalLabel">Salvataggi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p class="text-danger" id="salvaError" hidden><i class="bi bi-exclamation-circle-fill"></i>
                        Inserisci un nome</p>
                    <input type="text" id="nomeSalvataggio" class="form-control"
                        placeholder="Inserisci nome salvataggio"
                        onkeydown="if(event.key == 'Enter') { event.preventDefault(); salvaSalvataggio(); }">

                    <button type="button" class="btn btn-primary mt-2" onclick="salvaSalvataggio()">Salva</button>


                    <h3 class="mt-2">Salvataggi:</h3>
                    <ul id="salvataggiLista" class="list-group"></ul>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Chiudi</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <!-- Ciao, se stai guardando questo codice ti dico solo che non avevo idee per le variabili :) -->
    <!-- 
    Questo codice è stato creato da EXELVI per un piccolo progetto scolastico. 
    Sei libero di utilizzarlo e modificarlo per i tuoi progetti, 
    ma ti chiedo cortesemente di riconoscere il mio contributo includendo il mio nome o link a github nella documentazione o direttamente nel codice. Grazie
    Github: https://github.com/EXELVI
    -->

    <script>
        function checkVuota(n) {
            return (n === undefined || n === null || n === "")
        }
        var numeriCattivi = [],
            salvataggi = {},
            salvataggioCorrente = "",
            salvataggiSettings = {};


        function generaNumerettibelli() {
            var quantitaNumeri = document.getElementById('quantitaNumeri').value;
            var minimo = parseInt(document.getElementById('minimo').value);
            var maksim = parseInt(document.getElementById('maksim').value);
            var numerini = document.getElementById('numerini');

            var quantitaNumeriDiv = document.getElementById('quantitaNumeriDiv')
            var minimoDiv = document.getElementById('minimoDiv')
            var maksimDiv = document.getElementById('maksimDiv')
            if (checkVuota(document.getElementById('minimo').value) || checkVuota(document.getElementById('maksim').value) || checkVuota(quantitaNumeri)) {
                if (checkVuota(document.getElementById('minimo').value)) {
                    minimoDiv.className = "text-danger"
                }
                if (checkVuota(document.getElementById('maksim').value)) {
                    maksimDiv.className = "text-danger"
                }
                if (checkVuota(quantitaNumeri)) {
                    quantitaNumeriDiv.className = "text-danger"
                }
                document.getElementById("valueError").innerHTML = "<i class=\"bi bi-exclamation-circle-fill\"></i> Inserisci tutti i valori</p>"
                return document.getElementById("valueError").hidden = false
            } else {
                if (!checkVuota(document.getElementById('minimo').value)) minimoDiv.className = ""
                if (!checkVuota(document.getElementById('maksim').value)) maksimDiv.className = ""
                if (!checkVuota(quantitaNumeri)) quantitaNumeriDiv.className = ""
                document.getElementById("valueError").hidden = true
            }
            numerini.innerHTML = '';

            if (((maksim - minimo + 1) - numeriCattivi.length) < quantitaNumeri) {
                document.getElementById("valueError").innerHTML = "<i class=\"bi bi-exclamation-circle-fill\"></i> L'intervallo tra il massimo e il minimo non è sufficiente per generare la quantità richiesta di numeri.</p>"
                return document.getElementById("valueError").hidden = false
            } else {
                document.getElementById("valueError").hidden = true
            }

            var numeriGenerati = [];

            for (var i = 0; i < quantitaNumeri; i++) {
                var numeroCasuale;
                do {
                    //if (true) { Forse nei prossimi update
                    //    numeroCasuale = ((Math.random() * (maksim - minimo + 1)).toFixed(2) + minimo).toString()
                    //    console.log(numeroCasuale)
                    //} else {
                    numeroCasuale = Math.floor(Math.random() * (maksim - minimo + 1)) + minimo;
                    // }
                } while (numeriGenerati.includes(numeroCasuale) || numeriCattivi.includes(numeroCasuale));

                numeriGenerati.push(numeroCasuale);

                var listItem = document.createElement('li');
                listItem.className = 'list-group-item';
                listItem.appendChild(document.createTextNode(numeroCasuale));
                numerini.appendChild(listItem);
            }
            if (salvataggioCorrente) {
                salvataggiSettings[salvataggioCorrente] = { quantitaNumeri: quantitaNumeri, minimo: minimo, massimo: maksim }
                localStorage.setItem('settingsNew', JSON.stringify(salvataggiSettings));
            }

        }

        function aggiunginumeronibrutti() {
            var numeronibrutti = parseInt(document.getElementById('numeronibrutti').value);

            if (checkVuota(document.getElementById('numeronibrutti').value)) {
                document.getElementById("escludiError").innerHTML = "<i class=\"bi bi-exclamation-circle-fill\"></i> Inserisci un numero</p>"
                return document.getElementById("escludiError").hidden = false
            } else {
                document.getElementById("escludiError").hidden = true
            }

            if (!numeriCattivi.includes(numeronibrutti)) {
                document.getElementById("escludiError").hidden = true
                numeriCattivi.push(numeronibrutti);

                var numeriBruttibruttiLista = document.getElementById('numeriBruttibruttiLista');
                var badge = document.createElement('span');
                badge.className = 'badge d-flex align-items-center p-1 pe-2 text-danger-emphasis bg-danger-subtle border border-danger-subtle rounded-pill';
                badge.innerHTML = numeronibrutti + '<span class="vr mx-2"></span><a href="#" onclick="rimuovinumeronibrutti(' + numeronibrutti + ')"><i class="bi bi-x-circle-fill text-danger"></i></a>';

                numeriBruttibruttiLista.appendChild(badge);
                document.getElementById('numeronibrutti').value = '';
            } else {
                document.getElementById("escludiError").innerHTML = "<i class=\"bi bi-exclamation-circle-fill\"></i> Questo numero è già stato escluso</p>"
                return document.getElementById("escludiError").hidden = false
            }
        }
        function visualizzaNumeriEsclusi() {
            var numeriBruttibruttiLista = document.getElementById('numeriBruttibruttiLista');
            numeriBruttibruttiLista.innerHTML = '';

            for (var i = 0; i < numeriCattivi.length; i++) {
                var badge = document.createElement('span');
                badge.className = 'badge d-flex align-items-center p-1 pe-2 text-danger-emphasis bg-danger-subtle border border-danger-subtle rounded-pill';
                badge.innerHTML = numeriCattivi[i] + '<span class="vr mx-2"></span><a href="#" onclick="rimuovinumeronibrutti(' + numeriCattivi[i] + ')"><i class="bi bi-x-circle-fill text-danger"></i></a>';
                numeriBruttibruttiLista.appendChild(badge);
            }
        }

        function visualizzaSalvataggi() {
            var salvataggiLista = document.getElementById('salvataggiLista');

            salvataggiLista.innerHTML = '';
            var keys = Object.keys(salvataggi)
            for (var i = 0; i < keys.length; i++) {
                var questo = salvataggioCorrente == keys[i]
                var listItem = document.createElement('li');
                listItem.className = 'list-group-item';
                listItem.appendChild(document.createTextNode(keys[i]));
                listItem.innerHTML = '<a href="#" onclick="rimuoviSalvattaggio(\'' + keys[i] + '\')" class="bi bi-x-circle-fill text-end text-danger"></a> ' + (questo ? "<strong>" : "") + listItem.innerHTML + (questo ? "</strong>" : "") + '<div class="float-end"><button type="button" class="btn btn-primary" onclick="caricaSalvataggio(\'' + keys[i] + '\')"><i id="caricaicona' + keys[i] + '" class="bi bi-upload"></i> Carica</button> <button type="button" class="btn btn-primary" onclick="salvaSalvataggio(\'' + keys[i] + '\')"><i id="salvaicona' + keys[i] + '" class="bi bi-download"></i> Salva</button></div>'
                salvataggiLista.appendChild(listItem);

            }

        }

        function salvaSalvataggio(salvataggio, apriModal) {
            var nomeSalvataggio = salvataggio || document.getElementById('nomeSalvataggio').value;
            var nomeeeee = document.getElementById('nomeSalvataggio')
            if (!salvataggio && apriModal) {
                return $("#saveModal").modal("show").then(() => {
                    nomeeeee.focus()
                })
            }
            else if (!nomeSalvataggio) {

                document.getElementById("salvaError").innerHTML = "<i class=\"bi bi-exclamation-circle-fill\"></i> Inserisci un nome</p>"
                return document.getElementById("salvaError").hidden = false
            } else {
                document.getElementById("salvaError").hidden = true

            }

            salvataggi[nomeSalvataggio] = numeriCattivi
            localStorage.setItem("numeriEsclusiNew", JSON.stringify(salvataggi))
            localStorage.setItem("selectedSave", nomeSalvataggio)
            nomeeeee.value = ""
            setSettings()
            document.getElementById("salvaicona").className = "bi bi-check2"
            document.getElementById("salvaicona" + salvataggio).className = "bi bi-check2"
            setTimeout(function () {
                document.getElementById("salvaicona").className = "bi bi-download"
                document.getElementById("salvaicona" + salvataggio).className = "bi bi-upload"
            }, 1000)



        }

        function rimuoviSalvattaggio(save) {
            delete salvataggi[save]
            delete salvataggiSettings[save]
            if (localStorage.getItem("selectedSave") == save) {
                localStorage.setItem("selectedSave", Object.keys(salvataggi)[0])
            }
            localStorage.setItem("numeriEsclusiNew", JSON.stringify(salvataggi))
            localStorage.setItem("settingsNew", JSON.stringify(salvataggiSettings))
            if (Object.keys(JSON.parse(localStorage.getItem("numeriEsclusiNew"))).length == 0) {
                localStorage.setItem("selectedSave", "")
            }
            setSettings()
        }

        function caricaSalvataggio(save) {
            localStorage.setItem("selectedSave", save)
            setSettings()
            document.getElementById("caricaicona" + save).className = "bi bi-check2"
            setTimeout(function () {
                document.getElementById("caricaicona" + save).className = "bi bi-upload"
            }, 1000)
        }

        function rimuovinumeronibrutti(numero) {
            var indexxxxx = numeriCattivi.indexOf(numero);
            if (indexxxxx !== -1) {
                numeriCattivi.splice(indexxxxx, 1);
                document.getElementById('numeriBruttibruttiLista').removeChild(document.getElementById('numeriBruttibruttiLista').childNodes[indexxxxx]);
            }
        }

        function cambiaTema(tipoTema) {
            var itemTema = document.getElementById("itemTema")
            if (!tipoTema) {
                var temaaaStorage = localStorage.getItem('tema');
                if (temaaaStorage != "dark") {
                    document.body.setAttribute('data-bs-theme', "dark");
                    itemTema.className = "bi bi-sun-fill"
                    localStorage.setItem('tema', "dark");
                }
                else {
                    document.body.setAttribute('data-bs-theme', "light");
                    itemTema.className = "bi bi-moon-stars-fill"
                    localStorage.setItem('tema', "light")
                }
            } else if (tipoTema === 'dark' || tipoTema === 'light') {
                document.body.setAttribute('data-bs-theme', tipoTema);
                localStorage.setItem('tema', tipoTema);
            }
        }

        function resetlocal() {
            var confermaaa = window.confirm("Sei sicuro di voler eliminare tutte le impostazioni? (Questo eliminerà tutte le impostazioni salvate, compresi i salvataggi)");
            if (confermaaa) {
                localStorage.clear();
                alert('LocalStorage ripristinata con successo!');
                window.location.reload()
            }
        }

        function setSettings() {
            var temaSalvato = localStorage.getItem('tema');
            if (temaSalvato) {
                cambiaTema(temaSalvato);
            }
            var settingsNew = JSON.parse(localStorage.getItem('settingsNew'));

            if (localStorage.getItem('numeriEsclusi')) { // Vecchia versione (unico array) a nuova versione (JSON con più salvataggi)
                localStorage.setItem('numeriEsclusiNew', JSON.stringify({ "Salvataggio 1": JSON.parse(localStorage.getItem('numeriEsclusi')) }));
                localStorage.removeItem("numeriEsclusi")
                localStorage.setItem('selectedSave', "Salvataggio 1");
            }
            var numeriEsclusiSalvati = JSON.parse(localStorage.getItem('numeriEsclusiNew'));
            var selectedSave = localStorage.getItem('selectedSave');
            if (settingsNew) {
                salvataggiSettings = settingsNew
                if (settingsNew[selectedSave]) {
                    document.getElementById('quantitaNumeri').value = settingsNew[selectedSave]?.quantitaNumeri
                    document.getElementById('minimo').value = settingsNew[selectedSave]?.minimo
                    document.getElementById('maksim').value = settingsNew[selectedSave]?.massimo
                }
            }
            var salvataggiotestotototo = document.getElementById('salvataggiotestotototo');
            salvataggiotestotototo.innerHTML = selectedSave
            if (numeriEsclusiSalvati) {
                salvataggi = numeriEsclusiSalvati
                if (selectedSave) {
                    salvataggioCorrente = selectedSave
                    numeriCattivi = numeriEsclusiSalvati[selectedSave];
                    visualizzaNumeriEsclusi();
                } else {
                    salvataggioCorrente = ""
                }
                visualizzaSalvataggi()
            }
        }
        document.addEventListener('DOMContentLoaded', function () {
            setSettings()
        });



    </script>

</body>

</html>